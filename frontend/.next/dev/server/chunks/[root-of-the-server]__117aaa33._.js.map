{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/henriqueanjos/Workspace/projects/estudei/frontend/src/proxy.ts"],"sourcesContent":["import { ProxyConfig, NextRequest, NextResponse } from \"next/server\"\n\nconst publicRoutes = [\n    {path: '/SignIn', whenAuthenticated: 'redirect'},\n    {path: '/SignUp', whenAuthenticated: 'next'},\n    {path: '/', whenAuthenticated: 'next'},\n] as const\n\nconst redirectPage = '/'\n\n\nexport function proxy(request: NextRequest){\n    const path = request.nextUrl.pathname\n    const publicRoute = publicRoutes.find(route => route.path === path);\n    const authToken = request.cookies.get('authToken');\n\n    if(!authToken && publicRoute){\n        return NextResponse.next();\n    }\n\n    if(!authToken && !publicRoute){\n        const redirectUrl = request.nextUrl.clone();\n        redirectUrl.pathname = redirectPage;\n        return NextResponse.redirect(redirectUrl)\n    }\n\n    if(authToken && publicRoute && publicRoute.whenAuthenticated === 'redirect'){\n        const redirectUrl = request.nextUrl.clone();\n        redirectUrl.pathname = '/Home';\n        return NextResponse.redirect(redirectUrl)\n    }\n\n    if(authToken && !publicRoute){\n        //checar se o Token JWT é válido, se sim remover o cookie e redirecionar para o login.\n        if(authToken.value === 'undefined'){\n            request.cookies.delete('authToken');\n        }\n        return NextResponse.next();\n    }\n\n    return NextResponse.next();\n}\n\n\nexport const config: ProxyConfig = {\n    matcher: [\n        '/((?!api|_next/static|_next/image|favicon.ico|sitemap.xml|robots.txt).*)', \n    ]\n}"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,eAAe;IACjB;QAAC,MAAM;QAAW,mBAAmB;IAAU;IAC/C;QAAC,MAAM;QAAW,mBAAmB;IAAM;IAC3C;QAAC,MAAM;QAAK,mBAAmB;IAAM;CACxC;AAED,MAAM,eAAe;AAGd,SAAS,MAAM,OAAoB;IACtC,MAAM,OAAO,QAAQ,OAAO,CAAC,QAAQ;IACrC,MAAM,cAAc,aAAa,IAAI,CAAC,CAAA,QAAS,MAAM,IAAI,KAAK;IAC9D,MAAM,YAAY,QAAQ,OAAO,CAAC,GAAG,CAAC;IAEtC,IAAG,CAAC,aAAa,aAAY;QACzB,OAAO,+SAAY,CAAC,IAAI;IAC5B;IAEA,IAAG,CAAC,aAAa,CAAC,aAAY;QAC1B,MAAM,cAAc,QAAQ,OAAO,CAAC,KAAK;QACzC,YAAY,QAAQ,GAAG;QACvB,OAAO,+SAAY,CAAC,QAAQ,CAAC;IACjC;IAEA,IAAG,aAAa,eAAe,YAAY,iBAAiB,KAAK,YAAW;QACxE,MAAM,cAAc,QAAQ,OAAO,CAAC,KAAK;QACzC,YAAY,QAAQ,GAAG;QACvB,OAAO,+SAAY,CAAC,QAAQ,CAAC;IACjC;IAEA,IAAG,aAAa,CAAC,aAAY;QACzB,sFAAsF;QACtF,IAAG,UAAU,KAAK,KAAK,aAAY;YAC/B,QAAQ,OAAO,CAAC,MAAM,CAAC;QAC3B;QACA,OAAO,+SAAY,CAAC,IAAI;IAC5B;IAEA,OAAO,+SAAY,CAAC,IAAI;AAC5B;AAGO,MAAM,SAAsB;IAC/B,SAAS;QACL;KACH;AACL","debugId":null}}]
}