{"version":3,"sources":["turbopack:///[project]/src/utils/formatDate.ts","turbopack:///[project]/src/components/StatisticsCard.tsx","turbopack:///[project]/src/utils/formatDuration.ts","turbopack:///[project]/src/components/ui/table.tsx","turbopack:///[project]/src/services/register.request.ts","turbopack:///[project]/src/app/(private)/Register/page.tsx"],"sourcesContent":["export function formatDate(date: string){\n    const d = new Date(date);\n    const day = d.getDate().toString().padStart(2, '0');\n    const month = (d.getMonth() + 1).toString().padStart(2, '0');\n    const year = d.getFullYear();\n    return `${day}/${month}/${year}`;\n}","import { ReactNode } from \"react\";\n\ntype Props = {\n    title: string;\n    children: ReactNode;\n}\n\nexport function StatisticsCard({ title, children }: Props) {\n    return (\n        <div className=\"w-full bg-slate-100 dark:bg-slate-800 p-4 rounded-lg  gap-4 relative pt-8\">\n            <div className=\"absolute top-0 px-2 rounded-b-md bg-primary\">\n                <span className=\"text-xxs uppercase font-black text-white whitespace-nowrap text-ellipsis\">{title}</span>\n            </div>\n            <div className=\"w-full flex  h-full justify-center items-center\">\n                {children}\n            </div>\n        </div>\n    )\n}","export function formatDuration(seconds: number) {\n    const hrs = Math.floor(seconds / 3600);\n    const mins = Math.floor((seconds % 3600) / 60);\n    const secs = seconds % 60;\n    return `${hrs.toString().padStart(2,'0')}:${mins.toString().padStart(2,'0')}:${secs.toString().padStart(2,'0')}`;\n}","\"use client\"\n\nimport * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Table({ className, ...props }: React.ComponentProps<\"table\">) {\n  return (\n    <div\n      data-slot=\"table-container\"\n      className=\"relative w-full overflow-x-auto\"\n    >\n      <table\n        data-slot=\"table\"\n        className={cn(\"w-full caption-bottom text-sm\", className)}\n        {...props}\n      />\n    </div>\n  )\n}\n\nfunction TableHeader({ className, ...props }: React.ComponentProps<\"thead\">) {\n  return (\n    <thead\n      data-slot=\"table-header\"\n      className={cn(\"[&_tr]:border-b\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction TableBody({ className, ...props }: React.ComponentProps<\"tbody\">) {\n  return (\n    <tbody\n      data-slot=\"table-body\"\n      className={cn(\"[&_tr:last-child]:border-0\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction TableFooter({ className, ...props }: React.ComponentProps<\"tfoot\">) {\n  return (\n    <tfoot\n      data-slot=\"table-footer\"\n      className={cn(\n        \"bg-muted/50 border-t font-medium [&>tr]:last:border-b-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableRow({ className, ...props }: React.ComponentProps<\"tr\">) {\n  return (\n    <tr\n      data-slot=\"table-row\"\n      className={cn(\n        \"hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableHead({ className, ...props }: React.ComponentProps<\"th\">) {\n  return (\n    <th\n      data-slot=\"table-head\"\n      className={cn(\n        \"text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableCell({ className, ...props }: React.ComponentProps<\"td\">) {\n  return (\n    <td\n      data-slot=\"table-cell\"\n      className={cn(\n        \"p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TableCaption({\n  className,\n  ...props\n}: React.ComponentProps<\"caption\">) {\n  return (\n    <caption\n      data-slot=\"table-caption\"\n      className={cn(\"text-muted-foreground mt-4 text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","\nimport { registerDTO, registerGetDTO } from \"@/dto/register\";\nimport { api } from \"@/lib/api\";\n\nexport async function createRegister(register: registerDTO){\n    const response = await api.post<registerDTO>('/register', register);\n    return response.data;\n}\n\nexport async function getRegisterById(id: string){\n    const response  = await api.get<registerGetDTO>(`/register/${id}`);\n    return response.data;\n}\n\nexport async function getAllRegister(){\n    const response  = await api.get<registerGetDTO[]>('/register');\n    return response.data;\n}\n\nexport async function updateRegister(register: registerDTO ){\n    const response = await api.put<registerDTO>(`/register/${register.id}`, register);\n    return response.data;\n}\n\nexport async function deleteRegister(id: string){\n    const response = await api.delete(`/register/${id}`);\n    return response.data;\n}","'use client'\n\nimport { PrivateHeader } from \"@/components/privateHeader\";\nimport { StatisticsCard } from \"@/components/StatisticsCard\";\nimport { Table, TableBody, TableCaption, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { getAllRegister } from \"@/services/register.request\";\nimport { formatDate } from \"@/utils/formatDate\";\nimport { formatDuration } from \"@/utils/formatDuration\";\nimport { useQuery } from \"@tanstack/react-query\";\n\nexport default function Register() {\n    const { data: groupedRegisters } = useQuery({\n        queryKey: ['registers'],\n        queryFn: getAllRegister,\n        select: (registers) => {\n            const map = new Map<string, typeof registers>();\n\n            for (const register of registers) {\n                const date = new Date(register.registeredAt).toISOString().split('T')[0];\n                if (!map.has(date)) map.set(date, []);\n                map.get(date)!.push(register);\n            }\n            return Array.from(map, ([date, items]) => ({\n                date,\n                registers: items,\n            }));\n        },\n    });\n\n    function bestSequence (){\n        if (!groupedRegisters || groupedRegisters.length === 0) return 0;\n\n        // Extrai e ordena as datas em ordem crescente\n        const dates = groupedRegisters\n            .map(g => new Date(g.date))\n            .sort((a, b) => a.getTime() - b.getTime());\n\n        let currentStreak = 0;\n        let bestStreak = 0;\n\n        for (let i = 0; i < dates.length; i++) {\n            const current = dates[i];\n            const previous = dates[i - 1];\n\n            // Ignora sábados e domingos\n            const dayOfWeek = current.getDay();\n            if (dayOfWeek === 0 || dayOfWeek === 6) continue;\n\n            if (\n                i > 0 &&\n                previous &&\n                current.getDay() !== 0 && // não domingo\n                previous.getDay() !== 6 && // não sábado\n                (current.getTime() - previous.getTime()) / (1000 * 60 * 60 * 24) === 1\n            ) {\n                currentStreak++;\n            } else {\n                currentStreak = 1;\n            }\n\n            if (currentStreak > bestStreak) {\n                bestStreak = currentStreak;\n            }\n        }\n\n        return bestStreak;\n    };\n\n\n    return (\n        <main className=\"w-full min-h-screen p-8\">\n            <PrivateHeader pageTitle=\"Registro de Rotina\" />\n            <div className=\"w-full flex flex-row gap-4 mt-4\">\n                <StatisticsCard title=\"Dias de Estudo\">\n                    <h1 className=\"text-7xl font-black\">{groupedRegisters ? groupedRegisters.length : 0}</h1>\n                </StatisticsCard>\n                <StatisticsCard title=\"Média de Horas p/dia\">\n                    <h1 className=\"text-7xl font-black\">{\n                        groupedRegisters && groupedRegisters.length > 0 ?\n                            formatDuration((groupedRegisters?.reduce(\n                                (sum, group) =>\n                                    sum +\n                                    group.registers.reduce((acc, r) => acc + (r.content.durationSeconds || 0), 0),\n                                0\n                            ) || 0) / groupedRegisters!.length)\n                            : '00:00:00'\n                    }\n                    </h1>\n                </StatisticsCard>\n                <StatisticsCard title=\"Melhor Sequência\">\n                    <h1 className=\"text-7xl font-black\">{bestSequence()}</h1>\n                </StatisticsCard>\n            </div>\n            <div className=\"w-full mt-4\">\n                <StatisticsCard title=\"Registro de Aulas\">\n                    <Table className=\"w-full\">\n                        <TableCaption>Suas sessões de estudo. Continue assim!</TableCaption>\n                        <TableHeader>\n                            <TableRow className=\"grid grid-cols-3\">\n                                <TableHead className=\"flex justify-center\">Data</TableHead>\n                                <TableHead className=\"flex justify-center\">Total de Conteúdos Cobertos</TableHead>\n                                <TableHead className=\"flex justify-center\">Tempo de Estudo</TableHead>\n                            </TableRow>\n                        </TableHeader>\n                        <TableBody>\n                            {groupedRegisters && groupedRegisters.length > 0 && groupedRegisters.map((register) => (\n                                <TableRow key={register.date} className=\"grid grid-cols-3\">\n                                    <TableCell className=\"flex justify-center\">{formatDate(register.date)}</TableCell>\n                                    <TableCell className=\"flex justify-center\">{register.registers.length}</TableCell>\n                                    <TableCell className=\"flex justify-center font-medium\">\n                                        {formatDuration(\n                                            register.registers.reduce((sum, r) => sum + (r.content.durationSeconds || 0), 0)\n                                        )}\n                                    </TableCell>\n                                </TableRow>\n                            ))}\n                        </TableBody>\n                    </Table>\n                </StatisticsCard>\n            </div>\n        </main>\n    )\n}"],"names":[],"mappings":"uCAAO,SAAS,EAAW,CAAY,EACnC,IAAM,EAAI,IAAI,KAAK,GACb,EAAM,EAAE,OAAO,GAAG,QAAQ,GAAG,QAAQ,CAAC,EAAG,KACzC,EAAQ,AAAC,GAAE,QAAQ,IAAK,CAAC,CAAE,QAAQ,GAAG,QAAQ,CAAC,EAAG,KAClD,EAAO,EAAE,WAAW,GAC1B,MAAO,CAAA,EAAG,EAAI,CAAC,EAAE,EAAM,CAAC,EAAE,EAAA,CAAM,AACpC,0ECCO,SAAS,EAAe,OAAE,CAAK,UAAE,CAAQ,CAAS,EACrD,MACI,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sFACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uDACX,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,oFAA4E,MAEhG,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2DACV,MAIjB,CClBO,SAAS,EAAe,CAAe,EAC1C,IAAM,EAAM,KAAK,KAAK,CAAC,EAAU,MAC3B,EAAO,KAAK,KAAK,CAAE,EAAU,KAAQ,IAE3C,MAAO,CAAA,EAAG,EAAI,QAAQ,GAAG,QAAQ,CAAC,EAAE,KAAK,CAAC,EAAE,EAAK,QAAQ,GAAG,QAAQ,CAAC,EAAE,KAAK,CAAC,EAAE,CADlE,EAAU,EAAA,EAC6D,QAAQ,GAAG,QAAQ,CAAC,EAAE,KAAA,CAAM,AACpH,iHCDA,EAAA,EAAA,CAAA,CAAA,OAEA,SAAS,EAAM,WAAE,CAAS,CAAE,GAAG,EAAsC,EACnE,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,YAAU,kBACV,UAAU,2CAEV,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,YAAU,QACV,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,gCAAiC,GAC9C,GAAG,CAAK,IAIjB,CAEA,SAAS,EAAY,CAAE,WAAS,CAAE,GAAG,EAAsC,EACzE,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,YAAU,eACV,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,kBAAmB,GAChC,GAAG,CAAK,EAGf,CAEA,SAAS,EAAU,WAAE,CAAS,CAAE,GAAG,EAAsC,EACvE,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,YAAU,aACV,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,6BAA8B,GAC3C,GAAG,CAAK,EAGf,CAeA,SAAS,EAAS,WAAE,CAAS,CAAE,GAAG,EAAmC,EACnE,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CACC,YAAU,YACV,UAAW,CAAA,EAAA,EAAA,EAAE,AAAF,EACT,8EACA,GAED,GAAG,CAAK,EAGf,CAEA,SAAS,EAAU,WAAE,CAAS,CAAE,GAAG,EAAmC,EACpE,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CACC,YAAU,aACV,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACX,qJACA,GAED,GAAG,CAAK,EAGf,CAEA,SAAS,EAAU,CAAE,WAAS,CAAE,GAAG,EAAmC,EACpE,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CACC,YAAU,aACV,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACX,yGACA,GAED,GAAG,CAAK,EAGf,CAEA,SAAS,EAAa,WACpB,CAAS,CACT,GAAG,EAC6B,EAChC,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,UAAA,CACC,YAAU,gBACV,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,qCAAsC,GACnD,GAAG,CAAK,EAGf,8JCtGA,IAAA,EAAA,EAAA,CAAA,CAAA,OAEO,eAAe,EAAe,CAAqB,EAEtD,MAAO,CADU,MAAM,EAAA,GAAG,CAAC,IAAI,CAAc,YAAa,EAAA,EAC1C,IAAI,AACxB,CAOO,eAAe,IAElB,MAAO,CADW,MAAM,EAAA,GAAG,CAAC,GAAG,CAAmB,YAAA,EAClC,IAAI,AACxB,+FCfA,EAAA,EAAA,CAAA,CAAA,KACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MAEe,SAAS,IACpB,GAAM,CAAE,KAAM,CAAgB,CAAE,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,CACxC,SAAU,CAAC,YAAY,CACvB,QAAS,EAAA,cAAc,CACvB,OAAS,AAAD,IACJ,IAAM,EAAM,IAAI,IAEhB,IAAK,IAAM,KAAY,EAAW,CAC9B,IAAM,EAAO,IAAI,KAAK,EAAS,YAAY,EAAE,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,AACpE,CAAC,EAAI,GAAG,CAAC,IAAO,EAAI,GAAG,CAAC,EAAM,EAAE,EACpC,EAAI,GAAG,CAAC,GAAO,IAAI,CAAC,EACxB,CACA,OAAO,MAAM,IAAI,CAAC,EAAK,CAAC,CAAC,EAAM,EAAM,GAAK,CAAC,MACvC,EACA,UAAW,EACf,CAAC,CACL,CACJ,GA0CA,MACI,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,oCACZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,uBACzB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4CACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,cAAc,CAAA,CAAC,MAAM,0BAClB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+BAAuB,EAAmB,EAAiB,MAAM,CAAG,MAEtF,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,cAAc,CAAA,CAAC,MAAM,gCAClB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+BACV,GAAoB,EAAiB,MAAM,CAAG,EAC1C,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,CAAC,GAAkB,OAC9B,CAAC,EAAK,IACF,EACA,EAAM,SAAS,CAAC,MAAM,CAAC,CAAC,EAAK,IAAM,EAAO,GAAE,CAAH,MAAU,CAAC,eAAe,GAAI,CAAC,CAAG,GAC/E,KACC,CAAC,CAAI,EAAkB,MAAM,EAChC,eAId,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,cAAc,CAAA,CAAC,MAAM,4BAClB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+BAAuB,AA7DrD,SAAS,EACL,GAAI,CAAC,GAAgD,IAA5B,EAAiB,MAAM,CAAQ,OAAO,EAG/D,IAAM,EAAQ,EACT,GAAG,CAAC,GAAK,IAAI,KAAK,EAAE,IAAI,GACxB,IAAI,CAAC,CAAC,EAAG,IAAM,EAAE,OAAO,GAAK,EAAE,OAAO,IAEvC,EAAgB,EAChB,EAAa,EAEjB,IAAK,IAAI,EAAI,EAAG,EAAI,EAAM,MAAM,CAAE,IAAK,CACnC,IAAM,EAAU,CAAK,CAAC,EAAE,CAClB,EAAW,CAAK,CAAC,EAAI,EAAE,CAGvB,EAAY,EAAQ,MAAM,GACd,IAAd,GAAiC,GAAG,CAAjB,IAGnB,EAAI,GACJ,GACqB,IAArB,CAA0B,CAAlB,MAAM,IACQ,GADkB,CACxC,CAA2B,CAAlB,MAAM,IACf,CAAC,CADuC,CAC/B,OAAO,GAAK,EAAS,OAAO,EAAA,CAAE,CAAK,GAAD,IAA0B,AAAlB,EAEnD,CADF,EAD0D,CAIxD,EAAgB,EAJ6C,AAO7D,EAP+D,AAO/C,IAChB,EAAa,CAAA,EAErB,CAEA,EALoC,KAK7B,CACX,WA2BQ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uBACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,cAAc,CAAA,CAAC,MAAM,6BAClB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,mBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,UAAC,4CACd,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACR,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,6BAChB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,+BAAsB,SAC3C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,+BAAsB,gCAC3C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,+BAAsB,yBAGnD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UACL,GAAoB,EAAiB,MAAM,CAAG,GAAK,EAAiB,GAAG,CAAC,AAAC,GACtE,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,QAAQ,CAAA,CAAqB,UAAU,6BACpC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,+BAAuB,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EAAS,IAAI,IACpE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,+BAAuB,EAAS,SAAS,CAAC,MAAM,GACrE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,2CAChB,CAAA,EAAA,EAAA,cAAA,AAAc,EACX,EAAS,SAAS,CAAC,MAAM,CAAC,CAAC,EAAK,IAAM,GAAO,EAAE,CAAH,MAAU,CAAC,eAAe,GAAI,CAAC,CAAG,QAL3E,EAAS,IAAI,cAgB5D"}