(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78864,40761,e=>{"use strict";var t=e.i(87012);function s({title:e,children:s}){return(0,t.jsxs)("div",{className:"w-full bg-slate-100 dark:bg-slate-800 p-4 rounded-lg  gap-4 relative pt-8",children:[(0,t.jsx)("div",{className:"absolute top-0 px-2 rounded-b-md bg-primary",children:(0,t.jsx)("span",{className:"text-xxs uppercase font-black text-white whitespace-nowrap text-ellipsis",children:e})}),(0,t.jsx)("div",{className:"w-full flex  h-full justify-center items-center",children:s})]})}function a(e){let t=Math.floor(e/3600),s=Math.floor(e%3600/60);return`${t.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${(e%60).toString().padStart(2,"0")}`}e.s(["StatisticsCard",()=>s],78864),e.s(["formatDuration",()=>a],40761)},82346,e=>{"use strict";function t(e){let t=new Date(e),s=t.getDate().toString().padStart(2,"0"),a=(t.getMonth()+1).toString().padStart(2,"0"),l=t.getFullYear();return`${s}/${a}/${l}`}e.s(["formatDate",()=>t])},43684,e=>{"use strict";var t=e.i(9165);async function s(e){return(await t.api.get(`/study-session/${e}/session`)).data}e.s(["generateSession",()=>s])},59759,e=>{"use strict";var t=e.i(87012),s=e.i(36500);function a({progress:e=0}){return(0,t.jsxs)("div",{className:"w-full flex flex-row gap-4 items-center",children:[(0,t.jsx)("div",{className:"w-full  bg-blue-200 rounded-full h-6 dark:bg-slate-700 p-1",children:(0,t.jsx)("div",{className:"bg-primary h-full rounded-full transition-[width] duration-200 delay-500",style:{width:`${e.toFixed(1)}%`}})}),(0,t.jsxs)("h1",{className:"font-bold",children:[e.toFixed(1),"%"]})]})}var l=e.i(78864),n=e.i(74694);let i=(0,n.default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var r=e.i(75157);function c({className:e,...s}){return(0,t.jsx)(i,{role:"status","aria-label":"Loading",className:(0,r.cn)("size-4 animate-spin",e),...s})}var d=e.i(16011),o=e.i(63331),x=e.i(21586),u=e.i(43684),m=e.i(82346),f=e.i(40761),h=e.i(19532),j=e.i(48704);let p=(0,n.default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var g=e.i(75522);function b(){let[e,n]=(0,g.useState)(0),[i,r]=(0,g.useState)("00:00:00"),[b,N]=(0,g.useState)(0),[y,S]=(0,g.useState)(0),[v,C]=(0,g.useState)(0),[D,w]=(0,g.useState)(0),{contest:k}=(0,d.useContest)(),{data:T}=(0,j.useQuery)({queryKey:["TodaySession"],queryFn:async()=>await (0,u.generateSession)(k.id),select:e=>e.reduce((e,t)=>{let s=`${t.disciplineName}-${t.numberLesson}`,a=e.find(e=>e.key===s),l=t.durationSeconds||0,n=t.Register?.length>0;return a?(a.numberStartContent=Math.min(a.numberStartContent,t.numberContent),a.numberEndContent=Math.max(a.numberEndContent,t.numberContent),a.remainingDurationSeconds+=n?0:l,a.totalDurationSeconds+=l):e.push({key:s,disciplineName:t.disciplineName,disciplineColor:t.disciplineColor,numberLesson:t.numberLesson,numberStartContent:t.numberContent,numberEndContent:t.numberContent,remainingDurationSeconds:n?0:l,totalDurationSeconds:t.durationSeconds}),e},[])}),{data:$}=(0,j.useQuery)({queryKey:["disciplines"],queryFn:o.getAllDiscipline}),{data:M}=(0,j.useQuery)({queryKey:["lessons"],queryFn:x.getAllLesson});return(0,g.useEffect)(()=>{let e=new Date;n(Math.ceil((new Date(k.exameDate).getTime()-e.getTime())/864e5))},[k]),(0,g.useEffect)(()=>{if(T&&T.length>0){let e=T.reduce((e,t)=>e+t.totalDurationSeconds,0);r((0,f.formatDuration)(e))}},[T]),(0,g.useEffect)(()=>{if($&&$.length>0){let e=$.reduce((e,t)=>e+t.completedDuration,0),t=$.reduce((e,t)=>e+t.totalDuration,0),s=$.reduce((e,t)=>e+t.completedContents,0);N(t),S(e),C(s)}},[$]),(0,g.useEffect)(()=>{M&&M.length>0&&w(M.filter(e=>e.completedContents===e.totalContents).length)},[M]),(0,t.jsxs)("main",{className:"w-full min-h-screen p-8",children:[(0,t.jsx)(s.PrivateHeader,{pageTitle:"Dashboard de Estudos"}),(0,t.jsx)(l.StatisticsCard,{title:"Progresso",children:(0,t.jsx)(a,{progress:y/b*100})}),(0,t.jsxs)("div",{className:"w-full flex flex-row gap-4 mt-4",children:[(0,t.jsx)(l.StatisticsCard,{title:"Total de Aulas Assistidas",children:(0,t.jsx)("h1",{className:"text-7xl font-black",children:D})}),(0,t.jsx)(l.StatisticsCard,{title:"Conteúdos Cobertos",children:(0,t.jsx)("h1",{className:"text-7xl font-black",children:v})}),(0,t.jsx)(l.StatisticsCard,{title:"Horas totais já Assistidas",children:(0,t.jsx)("h1",{className:"text-7xl font-black",children:(0,f.formatDuration)(y)})})]}),(0,t.jsx)("div",{className:"w-full mt-4",children:(0,t.jsx)(l.StatisticsCard,{title:"Hoje",children:(0,t.jsxs)("div",{className:"w-full grid grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"w-full col-span-2 flex flex-col gap-2",children:[(0,t.jsxs)("div",{className:"w-full grid grid-cols-8 items-center font-bold text-xxs gap-2",children:[(0,t.jsx)("div",{className:"col-span-4"}),(0,t.jsx)("span",{className:"flex items-center justify-center text-center bg-slate-100 dark:bg-slate-700 p-2 rounded-t-md",children:"Aula"}),(0,t.jsx)("span",{className:"flex items-center justify-center text-center bg-slate-100 dark:bg-slate-700  p-2 rounded-t-md",children:"Conteúdo Inicial"}),(0,t.jsx)("span",{className:"flex items-center justify-center text-center bg-slate-100 dark:bg-slate-700  p-2 rounded-t-md",children:"Conteúdo Final"}),(0,t.jsx)("span",{className:"flex items-center justify-center text-center bg-slate-100 dark:bg-slate-700  p-2 rounded-t-md rounded-r-md",children:"Tempo Restante"})]}),T?T.map(e=>(0,t.jsxs)("div",{className:"w-full col-span-2 grid grid-cols-8 gap-2 items-center justify-center border-2 rounded-md ",style:{borderColor:e.disciplineColor},children:[(0,t.jsx)("h2",{className:"col-span-4 font-black text-sm flex items-center justify-center px-4 py-2 rounded-l-sm ",style:{backgroundColor:e.disciplineColor,color:(0,h.getTextColor)(e.disciplineColor)},children:e.disciplineName}),(0,t.jsx)("span",{className:"flex items-center justify-center text-sm font-bold",children:e.numberLesson}),(0,t.jsx)("span",{className:"flex items-center justify-center text-sm font-bold",children:e.numberStartContent}),(0,t.jsx)("span",{className:"flex items-center justify-center text-sm font-bold",children:e.numberEndContent}),(0,t.jsx)("span",{className:"flex items-center justify-center text-sm font-bold",children:(0,f.formatDuration)(e.remainingDurationSeconds)})]},e.key)):(0,t.jsx)("div",{className:"w-full flex items-center justify-center",children:(0,t.jsx)(c,{className:"size-8"})})]}),(0,t.jsxs)("div",{className:"px-2 flex flex-col",children:[(0,t.jsx)("span",{className:"text-xs font-bold",children:"Horas Gastas"}),(0,t.jsxs)("div",{className:"flex h-full items-end justify-center",children:[(0,t.jsx)("h1",{className:"text-7xl font-black text-primary",children:T&&T.length>0&&(0,f.formatDuration)(T.reduce((e,t)=>e+t.totalDurationSeconds,0)-T.reduce((e,t)=>e+t.remainingDurationSeconds,0))}),(0,t.jsxs)("h3",{className:"text-lg font-black mb-2 text-slate-400 dark:text-slate-600 ",children:["/ ",i]})]})]})]})})}),(0,t.jsx)("div",{className:"w-full mt-4",children:(0,t.jsx)(l.StatisticsCard,{title:"Previsão",children:(0,t.jsxs)("div",{className:"w-full grid grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"px-2 flex flex-col",children:[(0,t.jsx)("span",{className:"text-xs font-bold",children:"Dias Restantes"}),(0,t.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,t.jsx)("h1",{className:`${e<0?"text-2xl":"text-7xl"} font-black`,children:e<0?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center text-center",children:[(0,t.jsx)(p,{size:48,className:"text-green-500"}),"Concurso já realizado!"]}):Math.ceil((new Date(k.exameDate).getTime()-new Date().getTime())/864e5)})})]}),(0,t.jsxs)("div",{className:"px-2 flex flex-col",children:[(0,t.jsx)("span",{className:"text-xs font-bold",children:"Horas Necessárias p/dia"}),(0,t.jsx)("div",{className:"flex h-full py-8 items-center justify-center",children:(0,t.jsx)("h1",{className:`${e<0?"text-2xl":"text-7xl"} font-black`,children:$?e<0?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center text-center",children:[(0,t.jsx)(p,{size:48,className:"text-green-500"}),"Concurso já realizado!"]}):(0,f.formatDuration)(Math.ceil($.reduce((e,t)=>e+t.totalDuration,0)/(3600*e))):(0,t.jsx)("div",{className:"w-full flex items-center justify-center",children:(0,t.jsx)(c,{className:"size-8"})})})})]}),(0,t.jsxs)("div",{className:"px-2 flex flex-col",children:[(0,t.jsx)("span",{className:"text-xs font-bold",children:"Data da Prova"}),(0,t.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,t.jsx)("h1",{className:"text-7xl font-black",children:(0,m.formatDate)(k.exameDate)})})]})]})})})]})}e.s(["default",()=>b],59759)}]);